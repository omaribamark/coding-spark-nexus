# =====================================================
# HAKIKISHA BACKEND - Environment Configuration
# =====================================================

# Server Configuration
NODE_ENV=development
PORT=5000
SERVER_URL=http://localhost:5000

# CORS Configuration (CRITICAL for Mobile App)
# For development: Include capacitor://localhost, http://localhost, ionic://localhost
# For production: Add your deployed frontend URLs
# Separate multiple origins with commas
ALLOWED_ORIGINS=capacitor://localhost,http://localhost,ionic://localhost,http://localhost:3000,http://localhost:8080,https://e2280cef-9c3e-485b-aca5-a7c342a041ca.lovableproject.com


# =====================================================
# Database Configuration (PostgreSQL on Render)
# =====================================================
# Get these values from your Render PostgreSQL dashboard
# Format: postgres://username:password@host:port/database
# Example from Render: postgres://hakikisha_user:abc123@dpg-xxx.oregon-postgres.render.com/hakikisha_db

DB_HOST=dpg-xxx.oregon-postgres.render.com
DB_PORT=5432
DB_NAME=hakikisha_db
DB_USER=hakikisha_user
DB_PASSWORD=your_database_password_from_render

# Alternative: Use DATABASE_URL (Render provides this automatically)
# DATABASE_URL=postgres://username:password@host:port/database


# =====================================================
# Redis Configuration (RECOMMENDED for 5M users performance)
# =====================================================
# Redis is strongly recommended for production with high concurrency
# Format: redis://username:password@host:port
# If not set, will use in-memory cache (less performant)

REDIS_URL=redis://localhost:6379
# Alternative individual settings:
REDIS_HOST=
REDIS_PORT=6379
REDIS_PASSWORD=


# =====================================================
# JWT Configuration (REQUIRED for Authentication)
# =====================================================
# Generate secure random strings for production:
# node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"

JWT_SECRET=your_super_secure_jwt_secret_key_change_this_in_production
JWT_EXPIRES_IN=24h
JWT_REFRESH_SECRET=your_refresh_secret_key_change_this_in_production
JWT_REFRESH_EXPIRES_IN=7d


# =====================================================
# AWS Configuration (Optional - for file uploads)
# =====================================================
# Leave blank if not using AWS S3 for file storage

AWS_ACCESS_KEY_ID=
AWS_SECRET_ACCESS_KEY=
AWS_REGION=us-east-1
S3_BUCKET_NAME=
CLOUDFRONT_DISTRIBUTION=


# =====================================================
# AI API Configuration - Poe API (REQUIRED for AI features)
# =====================================================
# Poe API with Web-Search model for fact-checking
# This is the primary AI service for the application

POE_API_KEY=ZceEiyLZg4JbvhV8UDpnY0rMT037Pi4QIhdPy4pirRA
AI_MODEL=Web-Search

# Legacy OpenAI Configuration (Optional - if migrating)
AI_API_KEY=sk-your-openai-api-key-here
AI_API_URL=https://api.openai.com/v1
AI_MODEL_VERSION=gpt-4


# =====================================================
# Email Configuration (Optional - for notifications)
# =====================================================
# Leave blank if not using email notifications

EMAIL_SERVICE=ses
EMAIL_FROM=noreply@hakikisha.com
SENDGRID_API_KEY=


# =====================================================
# Rate Limiting (Recommended)
# =====================================================
# Prevent abuse by limiting requests per IP address
# RATE_LIMIT_WINDOW_MS: Time window in milliseconds (15 minutes = 900000)
# RATE_LIMIT_MAX_REQUESTS: Max requests per window per IP

RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100


# =====================================================
# Application Settings
# =====================================================

REGISTRATION_APPROVAL_REQUIRED=true
AUTO_ASSIGN_CLAIMS=true
TRENDING_THRESHOLD=50
MAX_FILE_SIZE=10485760

# Performance Settings for 5M Users (NEW)
DB_POOL_MAX=100
DB_POOL_MIN=10
CACHE_TTL=300


# =====================================================
# Monitoring (Optional)
# =====================================================

NEW_RELIC_LICENSE_KEY=